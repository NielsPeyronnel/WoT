<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>#trashTagChallenge</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
</head>



<body>


<section class="hero is-primary">
    <div class="hero-head">
        <nav class="navbar">
            <div class="container">
                <div class="navbar-brand">
                    <a class="navbar-item">
                        <img src="assets/logo_white.png" alt="Logo">
                    </a>
                    <span class="navbar-burger burger" data-target="navbarMenuHeroA">
            <span></span>
            <span></span>
            <span></span>
          </span>
                </div>
                <div id="navbarMenuHeroA" class="navbar-menu">
                    <div class="navbar-start">
                        <a class="navbar-item">
                            En cours
                        </a>

                        <a class="navbar-item">
                            À venir
                        </a>
                    </div>
                    <div class="navbar-end">
                        <span class="navbar-item">
                            <a class="button">
                                <span>Se connecter</span>
                            </a>
                         </span>
                        <span class="navbar-item">
                            <a class="button is-primary is-inverted" href="https://github.com/NielsPeyronnel/WoT">
                                <span class="icon"><i class="fab fa-github"></i></span>
                                <span>Mon projet</span>
                            </a>
                         </span>
                    </div>
                </div>
            </div>
        </nav>
    </div>


</section>


<section id="current" class="section">
    <div class="container">
        <h1 class="title">Evénements en cours</h1>
        <h2 class="subtitle">
            Il y a actuellement # événements en cours
        </h2>

        <table class="table is-hoverable is-fullwidth is-striped ">
            <thead>
            <tr>
                <th><abbr title="N°">N°</abbr></th>
                <th>Date</th>
                <th>Nom</th>
                <th>Personnes requises</th>
                <th>Personnes inscrites</th>
                <th>Localisation</th>
                <th>Météo</th>
                <th>Inscription</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <th>1</th>
                <td>23/05/2019 15h00</td>
                <td>On se bouge à Pech David</td>
                <td>25</td>
                <td>12</td>
                <td><a>Pech David</a></td>
                <td><span class="icon"><i class="fas fa-sun"</span></td>
                <td><a class="button is-primary is-outlined">S'inscrire</a></td>
            </tr>
            </tbody>
        </table>
    </div>
</section>


<section id="upcoming" class="section">
    <div class="container">
        <h1 class="title">Evénements à venir</h1>
        <h2 class="subtitle">
            Il y a # événements à venir
        </h2>

        <table class="table is-hoverable is-fullwidth is-striped ">
            <thead>
            <tr>
                <th><abbr title="N°">N°</abbr></th>
                <th>Nom</th>
                <th>Personnes requises</th>
                <th>Personnes inscrites</th>
                <th>Localisation</th>
                <th>Météo</th>
                <th>Inscription</th>
            </tr>
            </thead>
        </table>
        <tbody>

        </tbody>
    </div>
</section>

<footer class="footer">
    <h2 class="title">Debug</h2>
    <div class="content">
        <p>
            Websocket <strong><span id="rs">&nbsp;</span></strong>
        </p>
        <p>
            La table Event possède <strong><span id="line_event">&nbsp;</span></strong> lignes
        </p>

    </div>
</footer>

</body>

</html>

<script>
    var ws = null;

    //création du socket
    ws = new WebSocket("ws://54.38.38.118:1337");

    if (ws !=='undefined') {
        var rs = document.getElementById('rs');
        var line_event = document.getElementById('line_event');

        // Ouverture du socket
        ws.onopen = function () {
                rs.innerHTML = "connecté";
        };
        // Reception des données
        ws.onmessage = function (e) {
            console.log("récéption de données");
            rs.innerHTML = "réception";
            line_event.innerHTML = e.data;
        };
        // Erreur avec le socket
        ws.onerror = function () {
            rs.innerHTML = "déconnecté";
        };
        // Fermeture de connexion
        ws.onclose = function (e) {
            rs.innerHTML = "déconnecté";
        };
        // Evénement submit du formulaire

        /*        document.getElementsByTagName('form')[0].onsubmit = function(e) {
                    var texte = document.getElementById('texte');
                    // Envoi de la chaîne texte
                    ws.send(texte.value);
                    log("> " + texte.value);
                    // Mise à zéro du champ et focus
                    texte.focus();
                    texte.value = '';
                    // Empêche de valider le formulaire
                    e.preventDefault();
                };*/


    } else {
        console.log("Ce navigateur ne supporte pas les websockets");
    }




</script>
